<!DOCTYPE html>
<html>
<head>
<title>python Notes</title>
<!-- 2015-08-02 -->
<meta  charset="utf-8">
<meta  name="generator" content="Org-mode">
<meta  name="author" content="Wang Menglei">
<link rel="Stylesheet" type="text/css" href="assets/css/style.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript">
    function show_org_source(){
       /* document.location.href = rpl(document.location.href,"html","org.html"); */
       var url = document.location.href.split('#')[0];
       document.location.href = url.replace(/.html$/, '.org.html');
    }
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<!--<body onload="prettyPrint()">-->
<nav>
    <a href="index.html">Index</a>
    <a href="about.html">About</a>
    <a href="https://lotabout.github.io">Blog</a>
    <a href="sitemap.html">SiteMap</a>
</nav>
</div>
<div id="content">
<h1 class="title">python Notes</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">FAQ</a>
<ul>
<li><a href="#sec-1-1">How to call shell commands</a></li>
</ul>
</li>
<li><a href="#sec-2">Input/Output</a>
<ul>
<li><a href="#sec-2-1">String Format</a></li>
<li><a href="#sec-2-2">Methods of File Operation</a></li>
</ul>
</li>
<li><a href="#sec-3">urllib2</a>
<ul>
<li><a href="#sec-3-1">adding socks proxy to urllib2</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
Notes Using Python./Python使用笔记。
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">FAQ</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">How to call shell commands</h3>
<div class="outline-text-3" id="text-1-1">
<ol class="org-ol">
<li>use <code>os.system</code>
</li>
<li>use <code>call</code> from <code>subprocesses</code> module.
</li>

<li><a href="http://blog.sina.com.cn/s/blog_5357c0af0100yzet.html">Python 中如何调用 Shell</a>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Input/Output</h2>
<div class="outline-text-2" id="text-2">
<p>
Two ways of formatting:
</p>
<ol class="org-ol">
<li>concatinate strings manually.
</li>
<li>using <code>str.format()</code>
</li>
</ol>

<p>
Two ways to convert any value to a string: pass it to the <code>repr()</code>
or <code>str()</code> functions. <code>str()</code> is meant to generate results that are
human-readable while <code>repr()</code>'s result is for interpreter.
</p>

<p>
<code>str.zfill()</code> pads a numeric string on the left with zeros. It
understands about plus and minus signs:
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0dfaf; font-weight: bold;">print</span> <span style="color: #cc9393;">'12'</span>.zfill(5)
<span style="color: #f0dfaf; font-weight: bold;">print</span> <span style="color: #cc9393;">'-3.14'</span>.zfill(7)
<span style="color: #f0dfaf; font-weight: bold;">print</span> <span style="color: #cc9393;">'3.14159265359'</span>.zfill(5)
</pre>
</div>

<pre class="example">
00012
-003.14
3.14159265359
</pre>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">String Format</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Basic Usage:
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0dfaf; font-weight: bold;">print</span> <span style="color: #cc9393;">'We are the {} who says "{}!"'</span>.<span style="color: #8cd0d3;">format</span>(<span style="color: #cc9393;">'Knights'</span>, <span style="color: #cc9393;">'Ni'</span>)
</pre>
</div>

<pre class="example">
We are the Knights who says "Ni!"
</pre>

<p>
The '{}' is called "format field", it can refer to fields by number
or keywords:
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0dfaf; font-weight: bold;">print</span> <span style="color: #cc9393;">'{0} and {1}'</span>.<span style="color: #8cd0d3;">format</span>(<span style="color: #cc9393;">'spam'</span>, <span style="color: #cc9393;">'eggs'</span>)
<span style="color: #f0dfaf; font-weight: bold;">print</span> <span style="color: #cc9393;">'{1} and {0}'</span>.<span style="color: #8cd0d3;">format</span>(<span style="color: #cc9393;">'spam'</span>, <span style="color: #cc9393;">'eggs'</span>)

<span style="color: #f0dfaf; font-weight: bold;">print</span> <span style="color: #cc9393;">'This {food} is {adjective}.'</span>.<span style="color: #8cd0d3;">format</span>(food = <span style="color: #cc9393;">'spam'</span>, adjective =
                                           <span style="color: #cc9393;">'absolutly horrible'</span>)
</pre>
</div>

<pre class="example">
spam and eggs
eggs and spam
This spam is absolutly horrible.
</pre>

<p>
<code>!r</code> to retrieve <code>repr()</code> output and <code>!s</code> for <code>str()</code>
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0dfaf; font-weight: bold;">import</span> math
<span style="color: #f0dfaf; font-weight: bold;">print</span> <span style="color: #cc9393;">'The value of PI is approximately {}.'</span>.<span style="color: #8cd0d3;">format</span>(math.pi)
<span style="color: #f0dfaf; font-weight: bold;">print</span> <span style="color: #cc9393;">'The value of PI is approximately {!r}.'</span>.<span style="color: #8cd0d3;">format</span>(math.pi)
</pre>
</div>

<pre class="example">
The value of PI is approximately 3.14159265359.
The value of PI is approximately 3.141592653589793.
</pre>

<p>
Check <a href="https://docs.python.org/2/tutorial/inputoutput.html">Input
and Output</a> for more information.
</p>

<p>
Also, the complete syntax for formatting string is:
</p>
<pre class="example">
replacement_field ::=  "{" [field_name] ["!" conversion] [":" format_spec] "}"
field_name        ::=  arg_name ("." attribute_name | "[" element_index "]")*
arg_name          ::=  [identifier | integer]
attribute_name    ::=  identifier
element_index     ::=  integer | index_string
index_string      ::=  &lt;any source character except "]"&gt; +
conversion        ::=  "r" | "s"
format_spec       ::=  &lt;described in the next section&gt;
</pre>
<p>
Check
<a href="https://docs.python.org/2/library/string.html#format-string-syntax">Format
String Syntax</a> for more information.
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">Methods of File Operation</h3>
<div class="outline-text-3" id="text-2-2">
<p>
<code>read</code>: To read a file's contents, call <code>f.read(size)</code>, which will return a
string. <code>size</code> is optional, while omitted or negative, the entire
contens of the file will be read and returned.
</p>

<p>
<code>readline</code>: reads a single line from the file, and the newline
character '\n' will be left at the end of the string. If the
returned string is empty, the it has reached the end of the
file. While a blank line is represented by '\n', a string
containing only a single newline.
</p>

<p>
If you want to read all the lines of a file in a list, you can also
use <code>list(f)</code> or <code>f.readlinesf()</code>
</p>

<p>
<code>write</code>: <code>f.write(string)</code> writes <code>string</code> to the file, returning <code>None</code>.
</p>

<p>
<code>tell</code> and <code>seek</code>: to deal with file offset.
</p>
<div class="org-src-container">

<pre class="src src-python">&gt;&gt;&gt; <span style="color: #dfaf8f;">f</span> = <span style="color: #8cd0d3;">open</span>(<span style="color: #cc9393;">'test.txt'</span>, <span style="color: #cc9393;">'w+'</span>)
&gt;&gt;&gt; f.write(<span style="color: #cc9393;">'0123456789abcdef'</span>)
&gt;&gt;&gt; f.seek(5)     <span style="color: #7f9f7f;"># </span><span style="color: #7f9f7f;">go to the 6th byte in the file</span>
&gt;&gt;&gt; f.read(1)
<span style="color: #cc9393;">'5'</span>
&gt;&gt;&gt; f.seek(-3, 2) <span style="color: #7f9f7f;"># </span><span style="color: #7f9f7f;">go to the 3rd byte before the end</span>
&gt;&gt;&gt; f.read(1)
<span style="color: #cc9393;">'d'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">urllib2</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">adding socks proxy to urllib2</h3>
<div class="outline-text-3" id="text-3-1">
<p>
First we need to install <code>PySocks</code>, then import socks
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0dfaf; font-weight: bold;">import</span> socket
<span style="color: #f0dfaf; font-weight: bold;">import</span> socks
<span style="color: #f0dfaf; font-weight: bold;">import</span> urllib2

<span style="color: #dfaf8f;">PORT</span> = 1080
<span style="color: #7f9f7f;">#</span><span style="color: #7f9f7f;">No authentication</span>
<span style="color: #7f9f7f;">#</span><span style="color: #7f9f7f;">socks.set_default_proxy(socks.SOCKS5, "localhost")</span>
<span style="color: #7f9f7f;">#</span><span style="color: #7f9f7f;">With Authentication</span>
socks.set_default_proxy(socks.SOCKS5, <span style="color: #cc9393;">"my.proxyserver.com"</span>,PORT,<span style="color: #bfebbf;">True</span>,<span style="color: #cc9393;">"proxy_user"</span>,<span style="color: #cc9393;">"proxy_pass"</span>)
<span style="color: #dfaf8f;">socket.socket</span> = socks.socksocket  <span style="color: #7f9f7f;">#</span><span style="color: #7f9f7f;">dont add ()!!!</span>

urllib2.urlopen(<span style="color: #cc9393;">"http://..."</span>) <span style="color: #7f9f7f;"># </span><span style="color: #7f9f7f;">All requests will now pass through the SOCKS proxy</span>
</pre>
</div>

<ul class="org-ul">
<li><a href="http://moxone.me/post?pid=3">How to proxy urllib2 and more in Python</a>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<a href="#" class="back-to-top">Back to Top</a>

<!-- <hr class="comment"> -->
<!-- <div id="show_source"> -->
<!--   <input type="button" value="Show Org source" onClick='show_org_source()'> -->
<!-- </div> -->

</script>
<hr class="comment">
<section class="comment">
<!-- An element a visitor can click if they <3 comments! -->
<button class="btn show-comments">Load Disqus comments</button>
<div id="disqus_thread"></div>
 
<!-- The empty element required for Disqus to loads comments into -->
<!--<div id="disqus_thread"></div>-->
    <!--<script type="text/javascript">-->
        <!--/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */-->
        <!--var disqus_shortname = 'lotaboutvimwiki'; // required: replace example with your forum shortname-->

        <!--/* * * DON'T EDIT BELOW THIS LINE * * */-->
        <!--(function() {-->
            <!--var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;-->
            <!--dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';-->
            <!--(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);-->
        <!--})();-->
    <!--</script>-->
    <!--<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
</section>

<footer>
    |采用<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">CC BY-NC-SA 3.0</a>授权|由<a href="http://orgmode.org">Org Mode</a>自动生成<input type="button" value="Show Org source" onClick='show_org_source()'>|部署在<a href="https://github.com/lotabout/orgwiki">Github Pages</a>|
</footer>

    <script src="assets/js/jquery-1.7.1.min.js"></script>
    <script>
$(document).ready(function(){
	var offset = 100;
	var duration = 110;

        $(window).resize(function () {
            var toc= $('#table-of-contents')
            if ($(window).width() <= 800) {
                toc.css('position', 'static')
	        return
            }
            });
        $(window).scroll(
            function () {
            console.log("scroll called.")
            var toc= $('#table-of-contents')
            if ($(window).width() <= 800) {
            toc.css('position', 'static')
            return
            }

            if ($(this).scrollTop() > duration) {
            toc.css('left', toc.position().left + 'px')
            toc.css('position', 'fixed')
            $('.back-to-top').fadeIn(duration);
            } else {
            toc.css('left', '0px')
            toc.css('top', '0px')
            toc.css('position', 'relative')
            $('.back-to-top').fadeOut(duration);
            }
            });
        $('.back-to-top').click(
            function(event) {
            event.preventDefault;
            $('html, body').animate({scrollTop: 0}, duration);
            return false;
            });

        $('.show-comments').on('click', function(){
                               var disqus_shortname = 'lotaboutorgwiki'; // Replace this value with *your* username.

                               // ajax request to load the disqus javascript
                               $.ajax({
type: "GET",
url: "http://" + disqus_shortname + ".disqus.com/embed.js",
dataType: "script",
cache: true
});
                               // hide the button once comments load
                               $(this).fadeOut();
                               });
});
    </script>
</div>
</body>
</html>
